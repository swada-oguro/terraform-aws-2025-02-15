resource "aws_codebuild_webhook" "continuous_apply" {
  project_name = aws_codebuild_project.continuous-apply.name

  filter_group {
    filter {
      type = "EVENT"
      pattern = "PULL_REQUEST_CREATED"
    }
  }

  filter_group {
    filter {
      type = "EVENT"
      pattern = "PULL_REQUEST_UPDATED"
    }
  }
  
  filter_group {
    filter {
      type = "EVENT"
      pattern = "PULL_REQUEST_REOPENED"
    }
  }
  
  filter_group {
    filter {
      type = "EVENT"
      pattern = "PUSH"
    }
    filter {
      type = "HEAD_REF"
      pattern = "main"
    }
  }
}
